<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>Teio Server - æˆ˜ç»©å¤§å…</title>
    <link rel="icon" href="favicon.png" type="image/png">
    <style>
        :root { --main-green: #4CAF50; --card-bg: #1e1e1e; --dark-bg: #121212; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background: var(--dark-bg); color: white; margin: 0; padding: 20px; }
        .container { max-width: 1000px; margin: auto; }
        
        .match-card { background: var(--card-bg); border-radius: 8px; padding: 20px; margin-bottom: 20px; border: 1px solid #333; cursor: pointer; transition: 0.2s; text-decoration: none; display: block; color: white; }
        .match-card:hover { border-color: var(--main-green); transform: translateY(-3px); box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
        
        .match-meta { display: flex; justify-content: space-between; font-size: 0.85em; color: #888; border-bottom: 1px solid #222; padding-bottom: 10px; margin-bottom: 15px; }
        
        .score-display { display: flex; align-items: center; justify-content: center; gap: 30px; font-size: 2.2em; font-weight: 900; }
        .team-name { width: 220px; text-align: center; font-size: 0.45em; color: #ccc; }
        .team-name.winner { color: #fff; font-weight: bold; }
        .score-val { background: #000; padding: 5px 20px; border-radius: 5px; color: var(--main-green); }

        .btn-back { display: inline-block; margin-bottom: 20px; color: #888; text-decoration: none; }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="btn-back">â† è¿”å›ä¸»é¡µ</a>
        <h1 style="text-align: center; margin-bottom: 30px;">ğŸ† Teio CS2 æœåŠ¡å™¨ èµ›äº‹ä¸­å¿ƒ</h1>
        <div id="match-list">æ­£åœ¨åŠ è½½æ¯”èµ›åˆ—è¡¨...</div>
    </div>

    <script>
        async function loadMatches() {
            try {
                // æ ¸å¿ƒä¿®å¤ 1ï¼šåœ¨ URL åé¢åŠ æ—¶é—´æˆ³ (?t=...)ï¼Œå¼ºåˆ¶æµè§ˆå™¨æ¯æ¬¡éƒ½æ‹‰å–æœ€æ–°æˆ˜ç»©ï¼Œå½»åº•å‘Šåˆ« GitHub ç¼“å­˜å»¶è¿Ÿï¼
                const res = await fetch('data/matches.json?t=' + new Date().getTime());
                const matches = await res.json();
                const list = document.getElementById('match-list');
                list.innerHTML = '';
    
                matches.forEach(m => {
                    // æ ¸å¿ƒä¿®å¤ 2ï¼šå®Œç¾å…¼å®¹æ–°è€ Python è„šæœ¬çš„å­—æ®µåï¼ˆä¸ç®¡æ˜¯ score1 è¿˜æ˜¯ team1_score éƒ½èƒ½ç²¾å‡†è¯»å–ï¼‰
                    const s1 = m.score1 !== undefined ? m.score1 : (m.team1_score !== undefined ? m.team1_score : 0);
                    const s2 = m.score2 !== undefined ? m.score2 : (m.team2_score !== undefined ? m.team2_score : 0);
                    
                    const t1Win = s1 > s2;
                    const t2Win = s2 > s1;
                    
                    list.innerHTML += `
                        <a href="website/match_${m.id}.html" class="match-card">
                            <div class="match-meta">
                                <span>ç»“æŸæ—¶é—´: ${m.timestamp || "æœªè®°å½•"} &nbsp;|&nbsp; åœ°å›¾: ${(m.map || "æœªçŸ¥").replace('de_', '').toUpperCase()} &nbsp;|&nbsp; æ€»å±€æ•°: ${m.total_rounds || 24} å±€</span>
                                <span>ID: #${m.id}</span>
                            </div>
                            <div class="score-display">
                                <span class="team-name ${t1Win ? 'winner' : ''}">${m.team1}</span>
                                <span class="score-val">${s1} : ${s2}</span>
                                <span class="team-name ${t2Win ? 'winner' : ''}">${m.team2}</span>
                            </div>
                        </a>`;
                });
            } catch (e) { 
                console.error(e);
                document.getElementById('match-list').innerHTML = "æš‚æ— æˆ˜ç»©æ•°æ®æˆ–è¯»å–å¤±è´¥ã€‚"; 
            }
        }
        loadMatches();
    </script>
</body>
</html>